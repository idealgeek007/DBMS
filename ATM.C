#include <stdio.h>
#include <stdbool.h>

#include <string.h>
#include <unistd.h>

int t, k, m, n;
int amt = t;
int accno, code, amt;
struct BankAccount accounts[5];
int pointer;



struct BankAccount
{
    int accountNumber;
    int balance;
    int code;
};
void getinitData() // read the initial data from the text file generated by Bank program
{
    FILE *file = fopen("initdata.txt", "r");
    if (file == NULL)
    {
        perror("Error opening file");
        return;
    }
    fscanf(file, "%d %d %d %d", &t, &m, &n, &k);
    fclose(file);
}
void initDisplay()
{
    printf("Please Enter a Card");
}
void cardDetails()
{
    printf("Enter card number");
    scanf("%d", &accno);
}
int authaccno()
{

    int flag = 0;
    for (int i = 0; i < 5; i++)
    {
        if (accno == accounts[i].accountNumber)
        {
            flag = 1;
            pointer = i;
        }
    }

    return flag;
}
int authcode()
{
    printf("Enter password code\n");
    scanf("%d", &code);
    int flag = 0;
    for (int i = 0; i < 5; i++)
    {
        if (code == accounts[pointer].code)
        {
            flag = 1;
        }
    }
    return flag;
}
void readaccData()
{
    FILE *file = fopen("bank_data.csv", "r");
    if (file == NULL)
    {
        perror("Error opening file");
        return;
    }
    for (int i = 0; i < 5; i++)
    {
        fscanf(file, "%d,%d,%d\n", &accounts[i].accountNumber, &accounts[i].balance, &accounts[i].code)
    }
}

int main()
{

    bool authbool;

    getinitData();
    initDisplay();

    cardDetails();
    authbool = authaccno();
    if (authbool == 0)
    {
        printf("Account not found in database\n");
        return 0;
    }
    else if (authbool == 1)
    {
        if(authcode() == 1){


        }
        else{
            printf("Wrong code entered\n");
            return 0;
        }

    }
}